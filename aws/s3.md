
```hcl
region = "ap-south-1"
ENV = "development"
```
```hcl
terraform {
  required_version = "1.12.2"
  required_providers {
    aws = {
        source = "hashicorp/aws"
        version = "6.2.0"
    }
    random = {
      source = "hashicorp/random"
      version = "3.7.2"
    } #https://registry.terraform.io/providers/hashicorp/random/latest/docs
  }
}

variable "region" {
  type = string
}
variable "ENV" {
  type = string
}
```
```hcl
provider "aws" {
  region = var.region
}
provider "random" {
  # Configuration options
} #https://registry.terraform.io/providers/hashicorp/random/latest/docs
```
```hcl
resource "random_id" "bucket_id" {
  byte_length = 12
}

resource "aws_s3_bucket" "bucket" {
    bucket = "mahin-bucket-${random_id.bucket_id.hex}"
    tags = {
        Name        = "Demo Bucket"
        Environment = var.ENV
    }
}

resource "aws_s3_object" "file" {
  source = "./file.txt"
  bucket = aws_s3_bucket.bucket.bucket
  key = "myfile.txt"
}
```



---
* file.txt
  ```txt
  Hello, World!
  ```

* main.tf
  ```hcl
  terraform {
    required_providers {
      aws = {
      source = "hashicorp/aws"
      version = "6.2.0"
      }
    }
  }

  variable "region" {
    description = "The AWS region to deploy resources in"
    type        = string
    default     = "ap-south-1"      
  }

  provider "aws" {
    region = var.region
  }

  resource "aws_s3_bucket" "demo-bucket-block" {
    bucket = mahin-raza-bucket-123456789
    tags = {
      Name        = "Demo Bucket"
      Environment = "Dev"
    }
  }

  resource "aws_s3_object" "demo_object" {
    bucket = aws_s3_bucket.demo-bucket-block.bucket
    source = "./file.txt"
    key = "myfile.txt"
  }

  output "bucket_id" {
    value = random_id.bucket_id.hex
  }

  output "name" {
    value = aws_s3_bucket.demo-bucket-block.bucket  
  }

  ```
---

* main.tf
  ```hcl
  terraform {
    required_providers {
      aws = {
        source = "hashicorp/aws"
        version = "6.2.0"
      }
      random = {
        source = "hashicorp/random"
        version = "3.7.2"
      }
    }
  }

  provider "aws" {
    region = var.region
  }

  resource "random_id" "bucket_id" {
    byte_length = 8
  }

  resource "aws_s3_bucket" "demo-bucket-block" {
      bucket = "mahin-raza-bucket-${random_id.bucket_id.hex}"
      tags = {
          Name        = "Demo Bucket"
          Environment = "Dev"
      }
  }

  resource "aws_s3_object" "demo_object" {
      bucket = aws_s3_bucket.demo-bucket-block.bucket
      source = "./file.txt"
      key = "myfile.txt"
  }
  ```
* output.tf
  ```hcl
  output "bucket_id" {
      value = random_id.bucket_id.hex
  }

  output "name" {
      value = aws_s3_bucket.demo-bucket-block.bucket  
  }
  ```
* variable.tf
  ```hcl
  variable "region" {
      description = "The AWS region to deploy resources in"
      type        = string
      default     = "ap-south-1"
    
  }
  ```
---

```hcl
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = "us-east-1"
}

# Create S3 Bucket
resource "aws_s3_bucket" "my_bucket" {
  bucket = "my-terraform-state-bucket-mahin"   # must be globally unique

  tags = {
    Name        = "TerraformStateBucket"
    Environment = "Dev"
  }
}

# Enable Versioning (recommended for Terraform backend)
resource "aws_s3_bucket_versioning" "versioning" {
  bucket = aws_s3_bucket.my_bucket.id

  versioning_configuration {
    status = "Enabled"
  }
}

# Enable Server-Side Encryption (security best practice)
resource "aws_s3_bucket_server_side_encryption_configuration" "encryption" {
  bucket = aws_s3_bucket.my_bucket.id

  rule {
    apply_server_side_encryption_by_default {
      sse_algorithm = "AES256"
    }
  }
}

# Optional: Block Public Access
resource "aws_s3_bucket_public_access_block" "public_access" {
  bucket = aws_s3_bucket.my_bucket.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}
```
* Static site hosting
    * create bucket
    * Disable block public access
    * Create a public access policy
    * Upload site
    * Enable static site hosting
    * website endpoint

* terraform.tf
  ```hcl
  terraform {
    required_providers {
      aws = {
        source  = "hashicorp/aws"
        version = "6.2.0"
      }
      random = {
        source  = "hashicorp/random"
        version = "3.7.2"
      }
    }
  }
  ```
* index.html
  ```html
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>My First Web Page</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h1>Welcome to My Website</h1>
      <p>This is a simple web page using HTML and CSS.</p>
      <button>Click Me!</button>
    </div>
  </body>
  </html>
  ```
* error.html
  ```html
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>404 Error</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        color: #333;
      }

      .container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        text-align: center;
      }

      h1 {
        font-size: 60px;
        color: #e74c3c;
        margin: 0;
      }

      p {
        font-size: 18px;
        color: #555;
        margin-top: 10px;
      }

      a {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #3498db;
        color: #fff;
        text-decoration: none;
        border-radius: 5px;
      }

      a:hover {
        background-color: #2980b9;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>404 ERROR</h1>
      <p>The page you're looking for could not be found.</p>
      <a href="/">Go Home</a>
    </div>
  </body>
  </html>
  ```
* style.css
  ```css
  body {
    background-color: #f4f4f4;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }

  .container {
    text-align: center;
    margin-top: 100px;
  }

  h1 {
    color: #333;
  }

  p {
    color: #666;
  }

  button {
    padding: 10px 20px;
    background-color: #0077cc;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  button:hover {
    background-color: #005fa3;
  }
  ```
* providers.tf
  ```hcl
  provider "aws" {
    region = var.region
  }
  ```
* variables.tf
  ```hcl
  variable "region" {
    type = string
  }
  ```
* terraform.tfvars
  ```hcl
  region = "ap-south-1"
  ```
* main.tf
  ```hcl
  resource "random_id" "name" {
    byte_length = 8
  }

  resource "aws_s3_bucket" "bucket" {
    bucket = "mahin-${random_id.name.hex}"
    tags = {
      PROJECT = local.project_name
      ENV     = local.ENV
    }
  }

  resource "aws_s3_object" "index-html" {
    bucket  = aws_s3_bucket.bucket.bucket
    source  = "./index.html"
    key     = "index.html"
    content_type = "text/html"
  }

  resource "aws_s3_object" "style-css" {
    bucket  = aws_s3_bucket.bucket.bucket
    source  = "./style.css"
    key     = "style.css"
    content_type = "text/css"
  }

  resource "aws_s3_object" "error-html" {
    bucket  = aws_s3_bucket.bucket.bucket
    source  = "./error.html"
    key     = "error.html"
    content_type = "text/html"
  }

  resource "aws_s3_bucket_public_access_block" "demo-site" {
    bucket = aws_s3_bucket.bucket.id

    block_public_acls       = false
    block_public_policy     = false
    ignore_public_acls      = false
    restrict_public_buckets = false
  }

  resource "aws_s3_bucket_policy" "allow_access_from_internet" {
    bucket = aws_s3_bucket.bucket.id
    policy = jsonencode(
      {
        Version = "2012-10-17",
        Statement = [
          {
            Sid       = "PublicReadGetObject",
            Effect    = "Allow",
            Principal = "*",
            Action    = "s3:GetObject",
            Resource  = "arn:aws:s3:::${aws_s3_bucket.bucket.id}/*"
          }
        ]
      }
    )
  }

  resource "aws_s3_bucket_website_configuration" "bucket" {
    bucket = aws_s3_bucket.bucket.id

    index_document {
      suffix = "index.html"
    }
    
    error_document {
      key = "error.html"
    }
  }
  ```
* locals.tf
  ```hcl
  locals {
    project_name = "Demo-site"
    ENV          = "PROD"
  }
  ```
* output.tf
  ```hcl
  output "bucket_endpint" {
    value = aws_s3_bucket_website_configuration.bucket.website_endpoint
  }
  ```